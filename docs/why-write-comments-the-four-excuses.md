# **Глава 12. Нахуя писать комменты? Четыре тупые отмазки**

Документация в коде — это не просто "желательно", это, блядь, фундамент дизайна софта. Комментарии нужны не только для того, чтобы коллеги не проклинали тебя, пытаясь понять твой код, но и для **абстракции**. Без нормальных комментов ты не спрячешь сложность: кишки реализации будут торчать наружу. И наконец, если писать комменты правильно (а не для галочки), это улучшает сам дизайн системы. И наоборот: даже гениальная архитектура превращается в тыкву, если она задокументирована через жопу.

К сожалению, не все разделяют этот взгляд. Огромная часть продакшн-кода вообще не содержит комментариев. Многие разрабы считают, что это пустая трата времени; другие вроде и понимают пользу, но вечно "не успевают". К счастью, команд, которые выкупают фишку документации, становится больше. Но даже там комменты часто воспринимают как унылую барщину, и пишут их так, что лучше бы не писали вовсе. Хреновая документация — это тормоз, который тянет разработку на дно.

В этой главе я разберу гнилые отмазки, которыми разработчики оправдывают свою лень, и объясню, почему комменты реально решают. В главе 13 я расскажу, как писать комменты, от которых не вытекают глаза, а дальше мы поговорим про нейминг и про то, как доки спасают дизайн. Надеюсь убедить вас в трех вещах: хорошие комменты бустят качество софта; писать их не сложно; и (звучит как бред, но) это может быть даже весело.

Когда разрабы не пишут комменты, они обычно прикрываются одной из этих мантр:

*   «Хороший код документирует сам себя».
*   «У меня нет времени на писанину».
*   «Комменты устаревают и начинают пиздеть».
*   «Всё, что я видел — бесполезный мусор, нахера плодить сущности?»

Ниже я разнесу каждую из этих отмазок по фактам.

---

## 12.1 Хороший код документирует сам себя (Классический пиздёж)

Некоторые свято верят, что если код написан "чисто", то он настолько очевиден, что комменты не нужны. Это сладкий миф, вроде того, что от пива не толстеют: очень хочется верить, но, сука, это неправда. Конечно, можно и нужно выбирать нормальные имена переменных (см. Главу 14), чтобы снизить потребность в пояснениях. Но есть куча инфы по дизайну, которую тупо невозможно выразить кодом. Например, сигнатура метода — это лишь верхушка айсберга. А вот неформальные аспекты — что метод реально делает, в чём суть результата — живут только в комментах. Почему было принято именно такое архитектурное решение? При каких условиях этот метод вообще можно дёргать? Код тебе этого не скажет.

Некоторые умники говорят: "Хочешь понять, что делает метод? Прочитай его код, это точнее любого коммента". В теории — да, можно декомпилировать логику в голове, читая исходники, но это долго и больно. К тому же, если ты пишешь код с расчетом на то, что кто-то будет читать твои "кишки", ты начнешь дробить методы на мелкие куски. В итоге получишь кучу поверхностных методов-однострочников. Читать это легче не станет: чтобы понять общую картину, придется прыгать по вложенным методам как сайгак. Для больших систем читать код, чтобы понять поведение — это утопия.

Более того, **комменты — это клей для абстракции**. Вспомним главу 4: цель абстракции — скрыть сложность. Абстракция — это упрощенный вид сущности, где мы оставляем суть, но выкидываем детали, на которые можно забить. Если пользователю нужно читать код метода, чтобы его использовать — **абстракции нет**, ты всё проебал, сложность вывалена наружу. Без комментов единственная абстракция — это объявление метода (типы аргументов и имя). Этого ничтожно мало.

Пример: метод `substring(start, end)`. Из сигнатуры ни хера не понятно: входит ли символ под индексом `end` в результат? А что если `start > end`? Всё упадет или вернется пустая строка? Комменты позволяют описать эти нюансы, скрывая реализацию. И важно, что комменты пишутся на человеческом языке (английском, русском — похер), что дает нам выразительную мощь для простых и понятных объяснений. Хочешь нормальные абстракции — пиши, блядь, комменты.

## 12.2 У меня нет времени (Отмазка для ленивых)

Конечно, велик соблазн забить на доки ради новых фич. Если стоит выбор: "запилить новую кнопку" или "описать старую", логично выбрать кнопку. Проекты всегда горят, дедлайны жмут. Но если ты позволишь документации стать задачей "второго сорта", ты останешься без документации вообще.

Контраргумент тут простой — **инвестиционный подход** (см. стр. 15). Хочешь, чтобы система не превратилась в легаси-помойку и позволяла работать быстро в долгую? Потрать время сейчас. Хорошие комменты окупаются мгновенно за счет упрощения поддержки.

И давай честно: это не занимает много времени. Сколько ты реально *печатаешь* код? Процентов 10 от рабочего времени. Остальное — это "думать", "тупить", "компилять", "тестить". Даже если ты будешь тратить на комменты столько же времени, сколько на код (что дохера), это увеличит общее время разработки всего на 10%. Профит от того, что ты не будешь потом часами вспоминать "что это за хуйня", перекроет эти затраты с лихвой.

Самые важные комменты (описание классов и методов) вообще должны писаться *во время* дизайна (см. Глава 15). Это помогает структурировать мысли, так что они окупаются еще до того, как ты написал первую строчку кода.

## 12.3 Комменты устаревают и начинают пиздеть

Да, комменты могут протухнуть. Но это не катастрофа мирового масштаба. Поддерживать их актуальными не так уж сложно. Большие правки в доках нужны только при больших изменениях в коде (а код менять всё равно дольше). В Главе 16 я расскажу, как писать так, чтобы обновлять было легко (спойлер: не дублируй инфу и держи коммент рядом с кодом). А код-ревью — отличный повод дать по рукам тому, кто поменял логику, но забыл обновить описание.

## 12.4 Все комменты, что я видел — бесполезное говно

Из всех четырех отмазок — эта самая справедливая. Каждый разраб видел комменты типа `i++; // увеличиваем i на 1`, от которых хочется выколоть себе глаза. Большинство существующей документации — на троечку. Но это решаемо. Писать нормальные доки не сложно, если знать как. Следующие главы дадут тебе фреймворк, чтобы не быть мудаком и писать полезные вещи.

## 12.5 Какой профит от нормальных комментов?

Раз уж мы разнесли отмазки, давай о пользе. Главная идея: **захватить информацию, которая была в голове у архитектора, но не влезла в код**. Это может быть всё: от "почему мы используем этот грязный хак из-за бага в железе" до "какова вообще философия этого класса".

Когда другой разраб (или ты сам через полгода, когда всё забудешь) полезет что-то менять, комменты помогут сделать это быстро и без багов. Без них придется гадать и реконструировать замысел, а это риск понять всё неправильно и навернуть говнокода.

В Главе 2 мы говорили о трех всадниках апокалипсиса сложности:
1.  **Лавинный эффект (Change amplification):** тронул тут — развалилось там.
2.  **Когнитивная нагрузка (Cognitive load):** чтобы сделать правку, надо загрузить в мозг терабайт контекста.
3.  **Неведомая ебанина (Unknown unknowns):** хрен знает, что менять и где рванёт.

---

Хорошая документация лечит последние два пункта. Она снижает когнитивную нагрузку, давая нужную инфу и позволяя игнорировать ненужную. Тебе не надо читать весь код, чтобы понять суть. И она устраняет "неведомую ебанину", проясняя структуру системы и зависимости.

Короче, следующие главы научат тебя писать доки не как мудак, а как инженер, и встраивать этот процесс в дизайн так, чтобы твой софт не превращался в кусок говна.